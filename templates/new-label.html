<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>label</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Amatic+SC:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

<!-- CDN css files -->
    <!-- bootstrap css -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- bootatrap icons css -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <!-- aos css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
      integrity="sha512-1cK78a1o+ht2JcaW6g8OXYwqpev9+6GqOkz9xmBN9iUUhIndKtxwILGWYOSibOKjLsEdjyjZvYDq/cZwNeak0w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- glitebox min css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/glightbox/3.3.0/css/glightbox.min.css"
      integrity="sha512-T+KoG3fbDoSnlgEXFQqwcTC9AdkFIxhBlmoaFqYaIjq2ShhNwNao9AKaLUPMfwiBPL0ScxAtc+UYbHAgvd+sjQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- swiper-bundler -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css"
      integrity="sha512-rd0qOHVMOcez6pLWPVFIv7EfSdGKLt+eafXh4RO/12Fgr41hDQxfGvoi1Vy55QIVcQEujUE1LQrATCLl2Fs+ag=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- Template Main CSS File -->
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='assets/css/main.css') }}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='assets/css/new-label.css') }}"
    />
  </head>
  <body>
    <!-- ======= Header ======= -->
    <header id="header" class="header fixed-top d-flex align-items-center">
      <div class="container d-flex align-items-center justify-content-between">
        <a
          href="{{ url_for('ind') }}"
          class="logo d-flex align-items-center me-auto me-lg-0"
        >
          <h1>Foodsnap<span>.</span></h1>
        </a>
        <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
        <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
        <a class="btn-book-a-table" src="{{ url_for('ind') }}">Back</a>
       
      </div>

    </header>
    <!-- End Header -->

    <main id="main">

      <!-- seperating the variables for fast updation -->
    {% set x = my_dict %} {% set food_name = x["food_name"] %} {% set
      serving_qty = x["serving_qty"] %} {% set serving_unit = x["serving_unit"] %}
      {% set serving_weight_grams = x["serving_weight_grams"] %} {% set calories =
      x['nf_calories'] %} {% set total_fat = x["nf_total_fat"] %} {% set
      saturated_fat = x['nf_saturated_fat'] %} {% set cholesterol =
      x['nf_cholesterol'] %} {% set sodium = x['nf_sodium'] %} {% set carbs =
      x['nf_total_carbohydrate'] %} {% set dietary_fiber = x['nf_dietary_fiber']
      %} {% set sugars = x['nf_sugars'] %} {% set protein = x['nf_protein'] %} {%
      set potassium = x["nf_potassium"] %} {% set vita_d = x[324] %} {% set iron =
      x[303] %} {% set calcium = x[301] %}

      <section class="sample-page">
        <div class="label">
          <header>
            <h1 class="bold">Nutrition Facts</h1>
            <div class="divider"></div>
            <!-- <p>8 servings per container</p> -->
            <p class="bold"><span>{{food_name}}</span></p>
            <p class="bold">
              Serving size
              <span
                ><input
                  class="input2"
                  id="inputNumber"
                  type="number"
                  name="tentacles"
                  min="0.5"
                  max="100"
                  step="0.5"
                  value="{{serving_qty}}"
                  placeholder="{{serving_qty}}"
                  onChange="multiplyAndUpdate()"
              /></span>
            </p>
            <p class="bold">
              Serving(grams)
              <span><p class="serving_unit">{{serving_unit}}</p></span
              ><span id="serving_weight_grams">{{serving_weight_grams}}g</span>
            </p>
          </header>
          <div class="divider large"></div>
          <div class="calories-info">
            <div class="left-container">
              <h2 class="bold small-text">Amount per serving</h2>
              <h2>Calories</h2>
            </div>
            <span id="calories">{{calories|round|int}}</span>
          </div>
          <div class="divider medium"></div>
          <div class="daily-value small-text">
            <p class="bold right no-divider" id="calories_percent">
              % {{(calories*100/2000)|round(1)}} *
            </p>
            <div class="divider"></div>
            <p>
              <span class="bold"
                >Total Fat<span id="total_fat">{{total_fat}}g</span></span
              >
              <span id="total_fat_percent" class="bold"
                >{{(total_fat*100/78)|round(2)}}%</span
              >
            </p>
            <p class="indent no-divider">
              <span
                >Saturated Fat
                <span id="saturated_fat">{{saturated_fat}}g</span></span
              >
              <span id="saturated_fat_percent" class="bold"
                >{{(saturated_fat*100/20)|round(2)}}%</span
              >
            </p>
            <div class="divider"></div>
            <p>
              <span class="bold"
                >Cholesterol <span id="cholestrol">{{cholesterol}}mg</span></span
              >
              <span class="bold" id="cholestrol_percent"
                >{{(cholesterol*100/300)|round(2)}}%</span
              >
            </p>
            <p>
              <span class="bold">Sodium <span id="sodium">{{sodium}}mg</span></span>
              <span class="bold" id="sodium_percent"
                >{{(sodium*100/2300)|round(2)}}%</span
              >
            </p>
            <p>
              <span class="bold"
                >Total Carbohydrate <span id="carbs"> {{carbs}}g</span></span
              >
              <span class="bold" id="carbs_percent"
                >{{(carbs*100/275)|round(2)}}%</span
              >
            </p>
            <p class="indent no-divider">
              <span
                >Dietary Fiber<span id="dietary_fiber"
                  >{{dietary_fiber}}g</span
                ></span
              >
            </p>
            <div class="divider"></div>
            <p class="indent no-divider">
              <span>Sugars <span id="sugars">{{sugars}}g</span></span>
            </p>
            <div class="divider"></div>
            <p class="no-divider">
              <span class="bold"
                >Protein<span id="protein"> {{protein}}g</span></span
              >
            </p>
            <div class="divider large"></div>
            <p>
              <span>Vitamin D <span id="vita_d">{{vita_d}}mcg</span></span>
              <span id="vita_d_percent">{{(vita_d*100/20)|round(2)}}%</span>
            </p>
            <p>
              <span>Calcium <span id="calcium">{{calcium}}mgd</span></span>
              <span id="calcium_percent">{{(calcium*100/1300)|round(2)}}%</span>
            </p>
            <p>
              <span>Iron <span id="iron">{{iron}}mg</span></span>
              <span id="iron_percent">{{(iron*100/18)|round(2)}}%</span>
            </p>
            <p>
              <span>Potassium<span id="potassium">{{potassium}}mg</span></span>
              <span id="potassium_percent">{{(potassium*100/4700)|round(2)}}%</span>
            </p>
          </div>
    
          <img src="{{x['photo']['thumb']}}" />
    
          <div class="divider medium"></div>
          <p class="note">
            * The % Daily Value (DV) tells you how much a nutrient in a serving of
            food contributes to a daily diet. 2,000 calories a day is used for
            general nutrition advice.
          </p>
        </div>
        <!-- sample recipie table starts -->
        {%if x["sub_recipe"] %}
        <p alig;n="center">The recipie ingredients used for calculation are:</p>
        
        <div class="recipie_table">
          <table border="2">
            <thead>
              <tr>
                <th>Serving</th>
                <th>Ingredients</th>
                <th>Calories</th>
              </tr>
            </thead>
            <tbody>
              {% for y in x["sub_recipe"] %}
              <tr>
                <td>{{ y['serving_qty']}}{{y['serving_unit']}} or {{y['serving_weight']}}g</td>
                <td>{{ y['food'] }}</td>
                <td>{{ y['calories'] }}</td>
              </tr>
              {% endfor %}
            </tbody>
            </table>
        </div>
        {%endif %}
        
        <!-- sample recipie table  ends-->
        <div>
          <!-- serving measure changing dropdown -->
          <div class = "serving-form">
            <form action="/serving" method="post">
              <input type="hidden" value="{{my_dict}}" name="dummy" />
              <select name="serving_uni"class = "search-input">
                <!-- Add name attribute here -->
                <option disabled selected>serving size</option>
                {% for item in x["alt_measures"] %}
                <option value='{{item["serving_weight"]}}'>
                  {{item["serving_weight"]}}g {{item["measure"]}}
                  <!-- Display serving weight and measure -->
                </option>
                {% endfor %}
              </select>
              <button class = "search-btn" type="submit">change</button>
            </form>
          </div>
      </section>
      
    </main>
    <!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">
      <div class="container">
        <div class="copyright">
          &copy; Copyright <strong><span>Foodsnap</span></strong
          >. All Rights Reserved
        </div>
        <div class="credits">Designed by <b>Hemanth</b></div>
      </div>
    </footer>
    <!-- End Footer -->
    <!-- End Footer -->

    <div id="preloader"></div>


    <!-- javascript for label changes -->

    {% block javascript %}
    <script>
      // Function to multiply Jinja variable by input number and update the DOM
      function multiplyAndUpdate() {

          // taking all the variables available
          const calories = {{ x['nf_calories'] }};
          const serving_qty = {{ x['serving_qty'] }};
          const serving_unit = "{{ x['serving_unit'] }}"; // Keeping quotes for serving_unit assuming it's a string
          const serving_weight_grams = {{ x['serving_weight_grams'] }};
          const total_fat = {{ x['nf_total_fat'] }};
          const saturated_fat = {{ x['nf_saturated_fat'] }};
          const cholesterol = {{ x['nf_cholesterol'] }};
          const sodium = {{ x['nf_sodium'] }};
          const carbs = {{ x['nf_total_carbohydrate'] }};
          const dietary_fiber = {{ x['nf_dietary_fiber'] }};
          const sugars = {{ x['nf_sugars'] }};
          const protein = {{ x['nf_protein'] }};
          const potassium = {{ x['nf_potassium'] }};
          const vita_d = {{ x[324] }};
          const iron = {{ x[303] }};
          const calcium = {{ x[301] }};

          // this is input from the input form
          const inputNumber = parseFloat(document.getElementById('inputNumber').value);

          // calories
          const up_calories = calories * inputNumber;
          const up_calories_percent = ((up_calories/2000)*100);

          // weight
          const up_serving_weight_grams = serving_weight_grams * inputNumber;

          //fat
          const up_total_fat = total_fat * inputNumber;
          const up_total_fat_percent = ((up_total_fat/78)*100);

          //saturated-fat
          const up_saturated_fat = saturated_fat * inputNumber;
          const up_saturated_fat_percent = ((up_saturated_fat/20)*100);

          //cholestrol
          const up_cholestrol = cholesterol * inputNumber;
          const up_cholestrol_percent = ((up_cholestrol/300)*100);

          //sodium
          const up_sodium = sodium * inputNumber;
          const up_sodium_percent = ((up_sodium/2300)*100);

          //carbs
          const up_carbs = carbs * inputNumber;
          const up_carbs_percent = ((up_carbs/275)*100);

          //dietary_fiber
          const up_dietary_fiber = dietary_fiber * inputNumber;
          // sugars
          const up_sugars = sugars * inputNumber;
          // protein
          const up_protein = protein * inputNumber;

          // vita_d
          const up_vita_d = vita_d * inputNumber;
          const up_vita_d_percent = ((up_vita_d/20)*100);

          // iron
          const up_iron= iron * inputNumber;
          const up_iron_percent = ((up_iron/18)*100);

          // calcium
          const up_calcium = calcium * inputNumber;
          const up_calcium_percent = ((up_calcium/1300)*100);

          // potassium
          const up_potassium = potassium * inputNumber;
          const up_potassium_percent = ((up_potassium/4700)*100);

          document.getElementById('calories').textContent = Math.round(up_calories);
          document.getElementById('calories_percent').textContent = "% "+Math.round(up_calories_percent) + "*";

          document.getElementById('serving_weight_grams').textContent = Math.round(up_serving_weight_grams)+"g";

          document.getElementById('total_fat').textContent = Math.round(up_total_fat*100)/100+"g";
          document.getElementById('total_fat_percent').textContent = Math.round(up_total_fat_percent *100)/100+" %";

          document.getElementById('saturated_fat').textContent = Math.round(up_saturated_fat*100)/100+"g";
          document.getElementById('saturated_fat_percent').textContent = Math.round(up_saturated_fat_percent*100)/100+" %";

          document.getElementById('cholestrol').textContent = Math.round(up_cholestrol*100)/100+"mg";
          document.getElementById('cholestrol_percent').textContent = Math.round(up_cholestrol_percent*100)/100+" %";


          document.getElementById('sodium').textContent = Math.round(up_sodium*100)/100+"mg";
          document.getElementById('sodium_percent').textContent = Math.round(up_sodium_percent*100)/100+" %";

          document.getElementById('carbs').textContent = Math.round(up_carbs*100)/100+"g";
          document.getElementById('carbs_percent').textContent = Math.round(up_carbs_percent*100)/100+" %";

          document.getElementById('dietary_fiber').textContent = Math.round(up_dietary_fiber*100)/100+"g";
          document.getElementById('sugars').textContent = Math.round(up_sugars*100)/100+"g";
          document.getElementById('protein').textContent = Math.round(up_protein*100)/100+"g";

          document.getElementById('vita_d').textContent = Math.round(up_vita_d*100)/100+"mcg";
          document.getElementById('vita_d_percent').textContent = Math.round(up_vita_d_percent*100)/100+" %";


          document.getElementById('iron').textContent = Math.round(up_iron*100)/100+"mg";
          document.getElementById('iron_percent').textContent = Math.round(up_iron_percent*100)/100+" %";


          document.getElementById('calcium').textContent = Math.round(up_calcium*100)/100+"mg";
          document.getElementById('calcium_percent').textContent = Math.round(up_calcium_percent*100)/100+" %";


          document.getElementById('potassium').textContent = Math.round(up_potassium*100)/100+"mg";
          document.getElementById('potassium_percent').textContent = Math.round(up_potassium_percent*100)/100+" %";

      }

      // Add event listener to input field to trigger multiplication on input change
      document.getElementById('inputNumber').addEventListener('input', multiplyAndUpdate);
    </script>
    {%endblock%}

     <!-- CDN JS Files -->
     <script
     src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
     integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
     crossorigin="anonymous"
   ></script>
   <script
     src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"
     integrity="sha512-A7AYk1fGKX6S2SsHywmPkrnzTZHrgiVT7GcQkLGDe2ev0aWb8zejytzS8wjo7PGEXKqJOrjQ4oORtnimIRZBtw=="
     crossorigin="anonymous"
     referrerpolicy="no-referrer"
   ></script>
   <script
     src="https://cdnjs.cloudflare.com/ajax/libs/glightbox/3.3.0/js/glightbox.min.js"
     integrity="sha512-RBWI5Qf647bcVhqbEnRoL4KuUT+Liz+oG5jtF+HP05Oa5088M9G0GxG0uoHR9cyq35VbjahcI+Hd1xwY8E1/Kg=="
     crossorigin="anonymous"
     referrerpolicy="no-referrer"
   ></script>
   <script src="https://cdn.jsdelivr.net/npm/@srexi/purecounterjs/dist/purecounter_vanilla.js"></script>
   <script
     src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"
     integrity="sha512-Ysw1DcK1P+uYLqprEAzNQJP+J4hTx4t/3X2nbVwszao8wD+9afLjBQYjz7Uk4ADP+Er++mJoScI42ueGtQOzEA=="
     crossorigin="anonymous"
     referrerpolicy="no-referrer"
   ></script>
    <!-- Template Main JS File -->
    <script src="{{url_for('static', filename='assets/js/main.js')}}"></script>
  </body>
</html>
